<%#-- copyright
OpenProject Costs Plugin

Copyright (C) 2009 - 2014 the OpenProject Foundation (OPF)

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
version 3.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.

++#%>

<%= f.hidden_field :kind %>

<% resource = budget_attachment_representer(f.object) %>

<div class="form--field">
  <%= f.text_field :subject, required: true, autofocus: true, container_class: '-wide' %>
</div>
<!-- gly(-->
<div class="form--field">
   <%= f.select :parent_id, CostObject.where(project_id: @project.id).where.not(id: @cost_object.id).collect { |t| [t.name, t.id]}, {:include_blank => true}, autofocus: true, container_class: '-wide'%>
</div>
<!--)-->
<div class="form--field">
  <%= f.select :target_id, Target.where(project_id: @project.id).collect { |t| [t.name, t.id]}, required: true, autofocus: true, container_class: '-wide' %>
</div>
<div class="form--field">
  <%= f.text_area :description,
                  container_class: '-xxwide',
                  with_text_formatting: true,
                  resource: resource %>
</div>
<div class="form--field">
  <%= f.text_field :fixed_date, container_class: '-xslim', class: '-augmented-datepicker' %>
</div>

<% if @cost_object.kind == "VariableCostObject" -%>
  <%= activate_angular_js do %>
  <%= render partial: 'cost_objects/subform/material_budget_subform' %>
  <%= render partial: 'cost_objects/subform/labor_budget_subform' %>
  <% end %>
<%- end %>

<div style="clear: both;"> </div>
